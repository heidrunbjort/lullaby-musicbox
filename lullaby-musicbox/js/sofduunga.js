
// const lag1 = ['D6','', '', '', 'D6',  '',  '', '', 'G6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'G6', '', 'A6', '', 'Bb6', '', '', '', '', '', '', 'G6', '', '', '', 'Bb6', '', '', '', 'A6', '', '', '', 'G6', '', '', '', 'Gb6', '', '', '', '', '', '', 'D6', '', '', '', '', '', '', 'D6', '', '', '', 'D6', '', '', '', 'G6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'G6', '', 'A6', '', 'Bb6', '', '', '', '', '', '', 'A6', '', '', '', 'C7', '', '', '', 'Bb6', '', '', '', 'A6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'D6', '', '', '', ];
// let tone = 0;
// setInterval(() => {
// 	playNote(lag1[tone]);
// 	tone++;
// }, 150);

// const lag2 = ['D6','', '', '', 'D6',  '',  '', '', 'G6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'G6', '', 'A6', '', 'Bb6', '', '', '', '', '', '', 'G6', '', '', '', 'Bb6', '', '', '', 'A6', '', '', '', 'G6', '', '', '', 'Gb6', '', '', '', '', '', '', 'D6', '', '', '', '', '', '', 'D6', '', '', '', 'D6', '', '', '', 'G6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'G6', '', 'A6', '', 'Bb6', '', '', '', '', '', '', 'A6', '', '', '', 'C7', '', '', '', 'Bb6', '', '', '', 'A6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'D6', '', '', '', ];
// let tone2 = 0;
// setInterval(function(){
// 	playNote2(lag2[tone2]);
// 	tone2++;
// }, 100);

/*
const boy = ['',  '', '', '', 'G6','', 'D6', '', 'G7',  '',  'G6', '', 'G6', '', 'D6', '', 'B6', '', 'D6', '', 'A6', '', 'Db6', '', 'E6', '', 'G6', '', 'E6', '', 'Db6', '', 'A6', '', 'Db6', '', 'Bb6', '', 'Db6', '', 'Gb6', '', 'G6', '', 'Gb6','', 'Db6', '', 'Bb6', '', 'Db6', '', 'B6','', 'D6', '', 'Gb6', '', 'G6',  '', 'Bb6', '', 'D6', '', 'B6', '', 'D6', '', 'G6', '', 'D6', '', 'G7',  '',  'G6', '', 'G6', '', 'D6', '', 'B6', '', 'D6', '', 'A6', '', 'Db6', '', 'E6', '', 'G6', '', 'E6', '', 'Db6', '', 'A6', '', 'Db6', '', 'Bb6', '', 'Db6', '', 'Gb6', '', 'G6', '', 'Gb6','', 'Db6', '', 'Bb6', '', 'Db6', '', 'B6','', 'D6', '', 'Gb6', '', 'G6',  '', 'Bb6', '', 'D6', '', 'B6', '', 'D6', ];
let tone2 = 0;
setInterval(function(){
	playNote(boy[tone2]);
	tone2++;
}, 150);
*/

const boy = ['',  '', '', '', 'G6','', 'D6', '', 'G7',  '',  'G6', '', 'G6', '', 'D6', '', 'B6', '', 'D6', ''];

const jan = [ 'A6', '', 'Db6', '', 'E6', '', 'G6', '', 'E6', '', 'Db6', '', 'A6', '', 'Db6', ''];

const feb = ['Bb6', '', 'Db6', '', 'Gb6', '', 'G6', '', 'Gb6','', 'Db6', '', 'Bb6', '', 'Db6', '']

const year2015 = ['Eb6', '', 'G6', '', 'Bb6', '', 'Eb7', '', 'Bb6','', 'G6', '', 'Eb6', '', 'G6', ''];
const year2016 = ['C6', '', 'E6', '', 'G6', '', 'C7', '', 'G6','', 'E6', '', 'C6', '', 'E6', ''];
const year2017 = ['E6', '', 'Ab6', '', 'B6', '', 'E7', '', 'B6','', 'Ab6', '', 'E6', '', 'Ab6', ''];

const aquarius = ['B6','', 'D6', '', 'Gb6', '', 'G6',  '', 'Bb6', '', 'D6', '', 'B6', '', 'D6', ''];
const taurus = ['C6', '', 'F6', '', 'A6', '', 'F7', '', 'A6', '', 'F6', '', 'C6', '', 'F6', '' ];

// let spilalag = boy.concat(jan, year2015, taurus);
// let tone = 0;
// setInterval(()=>{
// 	playNote(spilalag[tone]);
// 	tone++;
// }, 150);

/*
const lag1 = ['',  '', '', '', '', 'Eb7',  'E7',  'Gb7', 'G7', '', '', '', '', '', '','','','','', '', '', '', '', '', '', '', '', '', 'G7','','', '', 'A7','','', '', 'G7','','', '', 'Db7', '','','','', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',  'D7', 'Eb7', 'E7', 'Gb7', '', '', '','', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 'Gb7', '', '', '','G7', '', '', '', 'Gb7', '', '', '', 'D7', '',  '', '', '', '', '', '', '', '', '', '', '', '', '', '',  '',  '', '', '', '', '', '', '', '', '', '', '', '',
			 'Eb7',  'E7',  'Gb7', 'G7', '', '', '', '', '', '','','','','', '', '', '', '', '', '', '', '', '', 'G7','','', '', 'A7','','', '', 'G7','','', '', 'Db7', '','','','', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',  'D7', 'Eb7', 'E7', 'Gb7', '', '', '','', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 'Gb7', '', '', '','G7', '', '', '', 'Gb7', '', '', '', 'D7', '',  '', '', '', '', '', '', '', '', '', '', '', '', '', '',  '',  '', '', '', '', '', '', '', '', '', '', '', '',];
let tone1 = 0;
setInterval(function(){
	playNote(lag1[tone1]);
	tone1++;
}, 75);
*/
// const lag2 = ['',  '', '', '', 'C6','', 'E6', '', 'G6',  '',  'C6', '', 'G6', '', 'E6', '', 'C6', '', 'D6', '', 'A6', '', 'Db6', '', 'E6', '', 'G6', '', 'E6', '', 'Db6', '', 'A6', '', 'Db6', '', 'Bb6', '', 'Db6', '', 'Gb6', '', 'G6', '', 'Gb6','', 'Db6', '', 'Bb6', '', 'Db6', '', 'B6','', 'D6', '', 'Gb6', '', 'G6',  '', 'Bb6', '', 'D6', '', 'B6', '', 'D6', '', 'G6', '', 'D6', '', 'G7',  '',  'G6', '', 'G6', '', 'D6', '', 'B6', '', 'D6', '', 'A6', '', 'Db6', '', 'E6', '', 'G6', '', 'E6', '', 'Db6', '', 'A6', '', 'Db6', '', 'Bb6', '', 'Db6', '', 'Gb6', '', 'G6', '', 'Gb6','', 'Db6', '', 'Bb6', '', 'Db6', '', 'B6','', 'D6', '', 'Gb6', '', 'G6',  '', 'Bb6', '', 'D6', '', 'B6', '', 'D6', ];
// let tone2 = 0;
// setInterval(function(){
// 	playNote2(lag2[tone2]);
// 	tone2++;
// }, 150);

// const lag1 = ['',  '', '', '', '', 'Ab7',  'A7',  'Bb7', 'B7', '', '','', 'D7', '', '','', 'G7','','','','B7','', '', '', '', '','','', 'D7', '', '','', 'G7', '', '','','B7','', '', '','', '', '', '','D7', '', '', '','G7','', '', '','B7', '','','', '', '', '', '','D7','', '','', 'G7', '', '', '','B7', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',  '', '', '', '', '', '', '','', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '','', '', '', '', '', '', '', '', '', '',  '', '', '', '', '', '', '', '', '', '', '', '', '', '',  '',  '', '', '', '', '', '', '', '', '', '', '', '',
// 			 '',  '',  '', '', '', '', '', '', '', '','','','','', '', '', '', '', '', '', '', '', '', '','','', '', '','','', '', '','','', '', '', '','','','', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',  '', '', '', '', '', '', '','', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '','', '', '', '', '', '', '', '', '', '',  '', '', '', '', '', '', '', '', '', '', '', '', '', '',  '',  '', '', '', '', '', '', '', '', '', '', '', '',];
// let tone1 = 0;

let playPosition = 0;
let songPlayer;
let songPlaying = false;

function playLullaby() {
	songPlaying = true;
	songPlayer = setInterval(() => {
		if(lullaby[playPosition]===undefined) {
			playPosition = 0;
			// clearInterval(songPlayer);
			// return console.log('song ended');
		}
		midi.playNote(lullaby[playPosition]);
		playPosition++;
	}, tempo);
}

function pauseLullaby() {
	songPlaying = false;
	clearInterval(songPlayer);
}

let star;
let moon;
//function moonAndStart() {
	/*var s = new XMLSerializer();
	var str = s.serializeToString(document);*/
fetch('img/stjerne.svg').then(response => {
	return response.text();
}).then(svg => {
	star = svg;
});

fetch('img/tungl.svg').then(response => {
	return response.text();
}).then(svg => {
	moon = svg;
});

function createStar(id) {

	if(star === undefined) {
		setTimeout(createStars(id), 150); 
		return;
	}
	const newStar = $.parseHTML(star.replace('id="replace"', `id="${id}"`));

	$('body').append(newStar);
}

function createStars() {

	const stars = [ 'star-1', 'star-2', 'star-3', 'star-4', 'star-5', 
					'star-6', 'star-7', 'star-8', 'star-9', 'star-10'];
	stars.forEach(star => {
		createStar(star);
	});
}

function createMoon() {

	if(moon === undefined) {
		setTimeout(createMoon(id), 150); 
		return;
	}

	const newMoon = $.parseHTML(moon);
	$('body').append(newMoon);
}

const element = document.querySelector('form');
element.addEventListener('submit', event => {
	event.preventDefault();
	// actual logic, e.g. validate the form
	loadBackground('img/space.jpg');
	$('#lullaby-form').addClass('hidden');
	$('#open-menu').addClass('close');
	$('#rec-stop').addClass('hidden');

	lullaby = boy.concat(jan, year2015, taurus);

	playButtonAction();
	createStars();
	createMoon();

  	$('#open-menu').off('click').on('click', () => {
  		if(songPlaying) {
  			playButtonAction();
  			lullaby = [];
  			playPosition = 0;
  		}
  		$( ".stjerne-skum" ).remove();
  		$( ".moon" ).remove();
  		loadBackground('img/bla.png');
  		$('#lullaby-form').removeClass('hidden');
  		$('#rec-stop').removeClass('hidden');
  		$('#open-menu').removeClass('close');
  		$('#open-menu').off('click').on('click', instructionsMenuOpenClose);
        return false;
    }); 
});
/*const lag = ['D6','', '', '', 'D6',  '',  '', '', 'G6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'G6', '', 'A6', '', 'Bb6', '', '', '', '', '', '', 'G6', '', '', '', 'Bb6', '', '', '', 'A6', '', '', '', 'G6', '', '', '', 'Gb6', '', '', '', '', '', '', 'D6', '', '', '', '', '', '', 'D6', '', '', '', 'D6', '', '', '', 'G6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'G6', '', 'A6', '', 'Bb6', '', '', '', '', '', '', 'A6', '', '', '', 'C7', '', '', '', 'Bb6', '', '', '', 'A6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'D6', '', '', '', ];
let tone = 0;
setInterval(() => {
	playNote(lag[tone]);
	tone++;
}, 150);
*/

/*
const lag = ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '',
  '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',
   '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',
    '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',
     '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',
      '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',
       '', '', '', '', '', '', '', '', '', '', '', ''];
let tone = 0; 
setInterval(() => {
 	playNote(lag[tone]);
 	tone++;
},150);
*/
// const lag = ['D6','', '', '', 'D6',  '',  '', '', 'G6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'G6', '', 'A6', '', 'Bb6', '', '', '', '', '', '', 'G6', '', '', '', 'Bb6', '', '', '', 'A6', '', '', '', 'G6', '', '', '', 'Gb6', '', '', '', '', '', '', 'D6', '', '', '', '', '', '', 'D6', '', '', '', 'D6', '', '', '', 'G6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'G6', '', 'A6', '', 'Bb6', '', '', '', '', '', '', 'A6', '', '', '', 'C7', '', '', '', 'Bb6', '', '', '', 'A6', '', '', '', 'G6', '', '', '', 'A6', '', '', '', 'D6', '', '', '', ];
// let tone = 0;
// setInterval(function(){
// 	playNote(lag1[tone1]);
// 	tone1++;
// }, 75);

// let lag=[];



// const stelpa = [ 'E6','', 'E6', '',  'E6', '', '', '', 
//  'D6', '',  'C6', '',  'C6', '', '','', '', '', '', '','','',  'E6', '',  'E6', '', 'E6', '', 'D6', '',  'D6', '', 'C6', '', 'D6', '', '','', 'C6', '',  'C6', '', '', '', '', '',
//     '', '','', '', 'E6', '', 'E6', '', 'E6', '', 'E6', '', 'E6', '', 'E6', '', 'E6','','','',  'F6', '', 'F6', '', '','', '', '', '','', '', '','E6', '', 'E6', '', 'E6', '','','', 'E6', '', '','', 'E6', '', '', '', 'D6', '', 'D6'];
// let tone = 0; 
// setInterval(function(){
// 	playNote(stelpa[tone]);
// 	tone++;
// },150)

